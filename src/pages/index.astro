---
// src/pages/index.astro
import '../styles/global.css';
import TopNav from '../components/TopNav.astro';
import BottomHUD from '../components/BottomHUD.astro';
import VisualizerCanvas from '../components/VisualizerCanvas.astro';
---

<html lang="zh-TW" class="dark">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link rel="manifest" href="/flutter_fourier3d/manifest.webmanifest" />
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/flutter_fourier3d/sw.js');
        });
      }
    </script>
    <title>3D 傅立葉變換視覺化 | Astro + Tailwind</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    class="bg-gray-950 text-slate-100 overflow-hidden font-[Inter] antialiased selection:bg-purple-500/30"
  >
    <!-- Background 3D Canvas (Atomic Component) -->
    <VisualizerCanvas />

    <!-- Foreground UI Layer -->
    <main class="absolute inset-0 z-10 flex flex-col pointer-events-none">
      
      <!-- Top Bar: Title & Global Toggles (Atomic Component) -->
      <TopNav />

      <!-- Center Space (Camera Controls Guide) -->
      <div id="camera-guide" class="flex-grow flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-700">
         <div class="bg-black/40 backdrop-blur-md border border-white/5 px-4 py-2 rounded-full text-[10px] text-slate-400 tracking-widest uppercase pointer-events-auto">
            Drag to Rotate • Right-Click to Pan • Scroll to Zoom
         </div>
      </div>

      <!-- Bottom Dashboard HUD (Atomic Component) -->
      <BottomHUD />
      <audio id="audio-player" crossorigin="anonymous" class="hidden"></audio>
    </main>

    <!-- Client Script with Logic -->
    <script src="../scripts/fourier.ts"></script>
  </body>
</html>
