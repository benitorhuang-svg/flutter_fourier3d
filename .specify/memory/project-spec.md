# 專案功能規格書：Fourier 3D Synthesis 平台

**開發功能分支 (Feature Branch)**：`main`  
**建立日期 (Created)**：2026-02-22  
**目前狀態 (Status)**：活躍開發中 (Active)  
**觸發來源與意圖 (Input)**：將專案轉換為專注於純粹數學之美與音訊互動的 3D 視覺化工具。徹底移除、捨棄先前的 Market Data (金融數據) 功能，並全面追求流暢、無干擾的極致沉浸式體驗。

## 使用者情境與驗證標準 *(核心項目 / Mandatory)*

### 使用者故事 1 - 沉浸式且即時的聽覺與視覺交響體驗 (優先級：P1 - 最高)

**身為** 一名音樂創作者、電子音樂製作人或視覺藝術愛好者，
**我想要** 在平台上切換到「音頻模式」(Audio Mode)，匯入一首音軌或直接開啟麥克風擷取現場聲音，
**如此一來** 我就能夠即時看見這些聲波的原始能量，透過傅立葉轉換 (Fourier Transform) 的數學解析後，完美轉化成 3D 空間中隨著頻率起伏、律動並擁有強烈生命力的幾何軌跡與發光粒子。

**為何這件事最為關鍵 (深入使用者意圖)**：
此功能是本專案的靈魂大腦。使用者來到這個網站最深層的渴望就是「看見聲音的形狀」。當冷硬的數學公式 (FFT) 與生動的視覺藝術 (Three.js WebGL) 在毫秒間完美無縫結合時，能夠帶給使用者極大的視覺愉悅感、驚奇感 (WOW element) 以及對聲音本質的啟發。

**如何獨立驗證此功能的成功**：
播放一段節奏強烈且頻率變化極其豐富的電子音樂，純粹透過人類感官觀察畫面上的 3D 幾何圖形，是否能「不容一絲遲疑地」精準對應到當下瞬間的重低音鼓點 (Kick) 與高頻鈸聲 (Hi-hat)，並確認沒有肉眼可察覺的視覺撕裂或落後。

**嚴格驗收情境 (Acceptance Scenarios)**：

1. **前提** 應用程式已經順利載入並顯示基礎的手動合成幾何圖形，**當** 使用者按下鍵盤快捷鍵 `2` 啟動音軌解析，**則** 用戶介面必須滑順地帶出音訊源設定選單（例如：選擇本地音樂播放、開啟系統麥克風權限），而背景的 3D 物件必須平順過渡至待命感測模式。
2. **前提** 音頻解析模式已成功啟動且高動態範圍的音樂正在播放中，**當** 音樂瞬間達到高潮或出現激昂的頻譜，**則** 負責渲染的 Three.js 3D 幾何網格必須在不到 50 毫秒內同步發生幅度劇烈的對應形變，且不會發生卡頓或影格遺失 (Zero visual lag)。

---

### 使用者故事 2 - 宛如演奏真實樂器的無縫鍵盤掌控力 (優先級：P2 - 極高)

**身為** 一名正在舞臺上表演的 VJ (視覺騎師)，或是一位正在大螢幕前向學生展示數學之美的授課教授，
**我想要** 徹底拋棄依賴滑鼠或觸控板，純粹透過敲擊鍵盤的捷徑鍵來行雲流水地切換視角、控制模式，甚至能夠一鍵將所有控制按鈕隱藏起來，
**如此一來** 在充滿氣氛的全螢幕展演過程中，我的實體觀眾與線上聽眾就不會被突然跳出來的選單、參數欄位或是找尋按鈕的滑鼠游標打破沉浸感。我能徹底專注並主宰視覺的呈現節奏。

**為何這件事非常關鍵 (深入使用者意圖)**：
這項設計賦予了這套軟體「專業展演級別」的高級質感 (Premium aesthetic capability)。對於硬核或專業使用者而言，被迫中斷視覺享受去滑動滑鼠或看右側的數字面板，是非常令人沮喪且破壞心流的。提供極致的純淨「沉浸模式」(Immersive Mode)，讓軟體本身成為他們的演奏工具，是這款應用程式與其他普通工具最大的差異。

**如何獨立驗證此功能的成功**：
將滑鼠連線拔除或放置於一旁，從載入網頁開始，只允許操作者使用特定鍵盤按鍵（如 `I` 進入沉浸, `Space` 切換平立面, `R` 重置, `O` 旋轉, `1/2/3` 模式切換） 來操作，測試是否能夠順暢且無障礙地體驗本系統帶來的所有震撼。

**嚴格驗收情境 (Acceptance Scenarios)**：

1. **前提** 畫面上目前充滿了各種詳細的參數拉桿與面板，**當** 使用者敲擊實體鍵盤的 `I` 鍵 (Immersive toggle)，**則** 畫面上所有精緻的毛玻璃面板 (Glass-cards) 及設定區塊，皆會觸發優雅滑順的動畫往左右兩側或畫面邊緣退出，畫面中只留下漆黑背景下純粹跳動的 3D 畫面。
2. **前提** 系統正處於 3D 自由觀看視角且物體持續運作中，**當** 使用者敲擊空白鍵 `Space`，**則** 鏡頭 (Camera) 會開啟一段平滑的補間動畫 (Tween animation)，自然過渡到嚴謹的 2D 完全平面視角 (Orthographic-like view)，再次敲擊則完美切換回來。

---

### 使用者故事 3 - 照顧細節的極致行動裝置響應性 (優先級：P3 - 高)

**身為** 一位平時在外奔波或習慣用手機瀏覽資訊的使用者，
**我想要** 即使在螢幕極小的智慧型手機瀏覽器上開啟這款複雜的 3D 系統時，也能妥善瀏覽並控制那些原本設計給寬螢幕的複雜控制旋鈕，
**如此一來** 不管我是深夜在床上隨手把玩參數尋找靈感，還是在咖啡廳直立手機展示給新朋友看，我都不用面臨破版、字體過小無法點擊，或畫面排版混亂的悲劇。

**為何這件事很重要 (深入使用者意圖)**：
專案中的「手動合成模式」包含了異常豐富的細微調整選項（振幅比例、基頻調整、波長倍數等）。保證這些散落於寬螢幕左右兩側的浮動操控面板，能在行動裝置的直立長形比例下被「收斂且有邏輯地堆疊整合」，是守住高品質應用程式名聲、展現工匠精神的底線。

**如何獨立驗證此功能的成功**：
開啟開發者工具，將視窗尺寸從典型的桌機寬度 (例如 1440px 或 1920px) 逐漸拖曳縮窄，直到最窄的行動裝置標準尺寸 (例如 375px 或 320px)，嚴格檢視所有 UI 模組是否能漂亮地重新排列，並且每一個滑桿依然能夠用手指直覺操控。

**嚴格驗收情境 (Acceptance Scenarios)**：

1. **前提** 應用程式正以桌面全尺寸 (Desktop view) 顯示，畫面左側與右側各停泊了一組控制面板，**當** 瀏覽器寬度觸發並縮窄跨越了行動版斷點 (Mobile breakpoints，如 Tailwind `md:` 設定)，**則** 兩側的面板會捨棄左右兩側的絕對定位，流暢地改變為垂直上下串接 (Stacked concisely)，同時保有半透明質感的易讀性及滑動順暢度。

---

## 系統規格與技術要求 *(強制要求 / Mandatory)*

### 系統核心行為要求 (Functional Requirements)

- **FR-001 [流暢渲染基底]**：系統必須能在主流硬體環境下的現代瀏覽器中，原生以穩定、毫不遲滯的 60 FPS (Frames Per Second) 效能引擎，渲染出由 Three.js 驅動的大量粒子或網格所構成的即時 WebGL 場景。
- **FR-002 [無縫頻率解析]**：系統必須內建一套高效率機制，透過掛載 `fft.js` 模組，即時將傳入的時域數位音訊訊號 (Time-domain audio signals) 解構為具備高度使用價值的頻譜振幅陣列資料 (Frequency-domain amplitude array)。
- **FR-003 [三大靈魂模式]**：系統必須提供且允許使用者在三種深思熟慮的核心邏輯間無縫穿梭：(1) **手動諧波疊加合成 (Manual Synthesis)**、(2) **即時音樂頻譜解析 (Audio Analysis/Visualizer)** 以及 (3) **無介入的沉浸劇院視角 (Auto-Camera/Showcase)**。
- **FR-004 [狀態唯一真理]**：系統必須嚴格屏棄紊亂的雙向綁定與局部狀態地獄，貫徹使用去中心化、無負擔的輕量級狀態管理庫 `nanostores` 作為統理所有組件資料交流的唯一真理 (Single state of truth)。
- **FR-005 [聰慧響應佈局]**：所有的視覺排版必須運用基於 Tailwind CSS 規範的最佳實踐，藉由媒體查詢斷點 (Media query breakpoints, ex: `md:`, `lg:`) 對應出具備空間邏輯的智慧型重構。
- **FR-006 [堅守產品定位]**：團隊**必須主動追蹤並連根拔除所有早先殘留的金融/市場數據 (Market Data) 查詢與描繪功能**。本專案不可妥協，其定位就是一套專注在「聲音與數學結合」的純粹視覺藝術裝置。

### 核心實體架構界定 (Key System Entities)

- **諧波總管代理人 (Harmonic Controller)**：作為抽象數學狀態與具象圖形的關鍵翻譯官，負責妥善儲存每一個微小波浪週期中的振幅 (Amplitude)、頻次 (Frequency)、相位角 (Phase)，並主導將這一連串枯燥的數字轉譯為 3D 世界裡波瀾壯闊的幾何形變浪潮。
- **音頻上下文處理中樞 (Audio Context Manager)**：負責與各種瀏覽器原生介面交涉的黑盒。接管使用者的麥克風授權、管理本地音軌的串流，並極具節奏感地定期將聲波餵入底層的 `fft.js` 黑箱，產出純淨的頻譜數據流。
- **空間攝影大腦 (Camera Controller)**：接管 Three.js 世界的心智與靈魂。負責理解目前使用者的意圖是想要開啟自動旋轉 (`Auto-Orbit()`) 放空欣賞，還是要在二維剖面與三度空間 (`2D/3D Mode Dimension`) 的轉換中探索未知的數學角度。

## 成功定義與結案指標 *(強制要求 / Mandatory)*

### 可量化且不妥協的成效檢測 (Measurable Quantitative Outcomes)

- **SC-001 [如絲滑般的運作]**：當 Three.js 3D 視覺渲染模組在背後處理巨大陣列的 FFT 音頻緩衝時，絕對**不可產生任何會打斷心流的跳幀 (Skipping frames)**。在一般的常規消費級筆電硬體上，必須展現平穩且毫無壓力的 60 FPS 極致體驗。
- **SC-002 [零體感落差]**：從「現實世界的節拍發聲點」或「輸入源啟動」到「3D 畫面的首度幾何變質點」，端到端的總體渲染延遲反應時間，必須以工程手段被嚴格壓縮限制在 **50 毫秒 (~50ms) 的人體無感閾值之下**。
- **SC-003 [閃電般的響應]**：所有用來提升沉浸感的鍵盤快捷輸入（諸如切換操作邏輯、隱藏介面等），必須能在這鍵盤微動開關被按下的一剎那起算，於短短的 **10 毫秒 (10ms) 內**便完成 `nanostores` 的內部狀態註冊與全域派發，賦予使用者一種「軟體已與神經元同步」的純粹掌控感。
